#Starts the application scan skipping unrelated security checks (replace 'computername' with your host name or IP. Do not use localhost or 127.0.0.1)

# This script starts the scan with the following configurations:
# 1. Excludes the following unrelated checks to improve performance: -code_injection_php_input_wrapper,-ldap_injection,-no_sql*,-backup_files,-backup_directories,-captcha,-cvs_svn_users,-credit_card,-ssn,-localstart_asp,-webdav 
# 2. Configures the autologin plugin to log is as User1
# 3. Replaces the Arachni user-agent HTTP header with a recent Chrome one
# 4. Saves the result report file appending the local timestamp on it
./arachni --checks=*,-code_injection_php_input_wrapper,-ldap_injection,-no_sql*,-backup_files,-backup_directories,-captcha,-cvs_svn_users,-credit_card,-ssn,-localstart_asp,-webdav --plugin=autologin:url=https://computername/login,parameters='login=user1@user1.com&password=abcd1234',check='Hi User 1|Logout' --scope-exclude-pattern='logout' --scope-exclude-pattern='resources' --session-check-pattern='Hi User 1' --session-check-url=https://computername --http-user-agent='Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/51.0.2704.103 Safari/537.36' --report-save-path=../scan_report_$(date -d "today" +"%Y%m%d%H%M").afr https://computername

# Processes the result report to a zip file containing HTML pages (replace _X for the generated timestamp)
./arachni_reporter ../scan_report_X.afr --reporter=html:outfile=../scan_report.html_X.zip
